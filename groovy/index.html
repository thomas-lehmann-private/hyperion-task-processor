<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="Thomas Lehmann &lt;thomas.lehmann.private@gmail.com" name="author"/>
<link href="https://thomas-lehmann-private.github.io/hyperion-task-processor/groovy/" rel="canonical"/>
<link href="../img/favicon.ico" rel="shortcut icon"/>
<title>Groovy task - Hyperion</title>
<link href="../css/bootstrap.min.css" rel="stylesheet"/>
<link href="../css/font-awesome.min.css" rel="stylesheet"/>
<link href="../css/base.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/docco.min.css" rel="stylesheet"/>
<script defer="" src="../js/jquery-1.10.2.min.js"></script>
<script defer="" src="../js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</head>
<body>
<div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
<div class="container">
<a class="navbar-brand" href="..">Hyperion</a>
<!-- Expander button -->
<button class="navbar-toggler" data-target="#navbar-collapse" data-toggle="collapse" type="button">
<span class="navbar-toggler-icon"></span>
</button>
<!-- Expanded navigation -->
<div class="navbar-collapse collapse" id="navbar-collapse">
<!-- Main navigation -->
<ul class="nav navbar-nav">
<li class="navitem">
<a class="nav-link" href="..">Home</a>
</li>
<li class="dropdown active">
<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#">User Guide <b class="caret"></b></a>
<ul class="dropdown-menu">
<li>
<a class="dropdown-item" href="../hyperion-task-processor/">Application</a>
</li>
<li>
<a class="dropdown-item" href="../taskgroup/">Taskgroup</a>
</li>
<li>
<a class="dropdown-item" href="../basic-task-features/">Basic tasks features</a>
</li>
<li>
<a class="dropdown-item" href="../basic-coded-task-features/">Basic code tasks</a>
</li>
<li>
<a class="dropdown-item active" href="./">Groovy task</a>
</li>
<li>
<a class="dropdown-item" href="../powershell/">Powershell task</a>
</li>
<li>
<a class="dropdown-item" href="../windows-batch/">Windows Batch task</a>
</li>
<li>
<a class="dropdown-item" href="../shell/">Shell task</a>
</li>
<li>
<a class="dropdown-item" href="../docker-image/">Docker image task</a>
</li>
<li>
<a class="dropdown-item" href="../docker-container/">Docker container task</a>
</li>
<li>
<a class="dropdown-item" href="../copy-file/">File copy task</a>
</li>
<li>
<a class="dropdown-item" href="../templating/">Templating</a>
</li>
<li>
<a class="dropdown-item" href="../matrix/">Matrix</a>
</li>
</ul>
</li>
<li class="dropdown">
<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#">Developer Guide <b class="caret"></b></a>
<ul class="dropdown-menu">
<li>
<a class="dropdown-item" href="../requirements/">Requirements</a>
</li>
<li>
<a class="dropdown-item" href="../build/">Build</a>
</li>
<li>
<a class="dropdown-item" href="../junit5/">JUnit5</a>
</li>
<li>
<a class="dropdown-item" href="../mkdocs/">Mkdocs</a>
</li>
<li>
<a class="dropdown-item" href="../cli/">CLI</a>
</li>
<li>
<a class="dropdown-item" href="../finishing-a-milestone/">Finishing a milestone</a>
</li>
</ul>
</li>
</ul>
<ul class="nav navbar-nav ml-auto">
<li class="nav-item">
<a class="nav-link" data-target="#mkdocs_search_modal" data-toggle="modal" href="#">
<i class="fa fa-search"></i> Search
                            </a>
</li>
<li class="nav-item">
<a class="nav-link" href="../basic-coded-task-features/" rel="prev">
<i class="fa fa-arrow-left"></i> Previous
                                </a>
</li>
<li class="nav-item">
<a class="nav-link" href="../powershell/" rel="next">
                                    Next <i class="fa fa-arrow-right"></i>
</a>
</li>
<li class="nav-item">
<a class="nav-link" href="https://github.com/thomas-lehmann-private/hyperion-task-processor/edit/master/docs/groovy.md"><i class="fa fa-github"></i> Edit on GitHub</a>
</li>
</ul>
</div>
</div>
</div>
<div class="container">
<div class="row">
<div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
<div class="navbar-header">
<button class="navbar-toggler collapsed" data-target="#toc-collapse" data-toggle="collapse" title="Table of Contents" type="button">
<span class="fa fa-angle-down"></span>
</button>
</div>
<div class="navbar-collapse collapse card bg-secondary" id="toc-collapse">
<ul class="nav flex-column">
<li class="nav-item" data-level="1"><a class="nav-link" href="#groovy-task">Groovy task</a>
<ul class="nav flex-column">
<li class="nav-item" data-level="2"><a class="nav-link" href="#minimal-example">Minimal example</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#minimal-example-with-tags">Minimal example with tags</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#example-with-variable">Example with variable</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#example-with-templating">Example with templating</a>
<ul class="nav flex-column">
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div></div>
<div class="col-md-9" role="main">
<h1 id="groovy-task">Groovy task</h1>
<p>This page doesn't intend to explain Groovy. So please refer to official Groovy
documentation for details on it. It's about the Groovy task.
The <a href="../basic-coded-task-features/">basic coded task features</a> are language
independent and explained in the link including:</p>
<ul>
<li>Having an optional <strong>title</strong> attribute</li>
<li>Using the <strong>code</strong> in attribute with same name</li>
<li>Having an optional <strong>tag</strong> attribute</li>
<li>Having an optional <strong>variable</strong> attribute</li>
<li>Having an optional <strong>with</strong> attribute</li>
</ul>
<h2 id="minimal-example">Minimal example</h2>
<p>The minimal example does not require a variable but the task
does have one (always) with the name '<strong>default</strong>'.
The default regex is the whole text, and the default group is 0.</p>
<pre><code class="yaml">---
taskgroups:
  - title: test
    tasks:
      - type: groovy
        code: println 'hello world!'
</code></pre>
<h2 id="minimal-example-with-tags">Minimal example with tags</h2>
<p>The application can be called with the repeatable option --tag. Specifying the
those filter task will be executed only contain those tags. Task with other tags
or even without any tags will be ignored then.</p>
<pre><code class="yaml">---
taskgroups:
  - title: test
    tasks:
      - type: groovy
        code: println 'hello world!'
        tags:
          - simple
          - example         
</code></pre>
<h2 id="example-with-variable">Example with variable</h2>
<p>The example with variable shows how to use the variable to extract information.
It's exactly the same way as it does work for other tasks.
You can specify the regex for filtering and - if required - the regex group;
the default group is 0.</p>
<pre><code class="yaml">---
taskgroups:
  - title: test
    tasks:
        - type: groovy
          title: a simple example
          code: println '---&gt; this is a demo &lt;---'
          variable:
              name: test2
              regex: "&gt;(.*)&lt;"
              group: 1
</code></pre>
<h2 id="example-with-templating">Example with templating</h2>
<p>The task group does store a map of key/value where key is the name of the variable, and
the value is a variable. If you do not specify a name for a variable the name is
'<strong>default</strong>'. In the following example the first task does write 'hello world!' into
the variable, and the second task does evaluate the value from the first task.
Of course the second one write into the same variable its output since also there
no name has been specified.</p>
<pre><code class="yaml">---
taskgroups:
  - title: test
    tasks:
      - type: groovy
        title: a simple example 1
        code: println 'hello world!'
      - type: groovy
        title: a simple example 2
        code: println '{{ variables.default.value }}'
</code></pre>
<p>In addition, you can evaluate the model if you have one.</p>
<pre><code class="yaml">---
model:
  description: some description

taskgroups:
  - title: test
    tasks:
      - type: groovy
        title: a simple example 1
        code: println '{{ model.attributest.description }}'
</code></pre>
<p>The rules on how to access the individual elements of a model are
explained <a href="../templating/">here</a>.</p></div>
</div>
</div>
<footer class="col-md-12">
<hr/>
<p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
</footer>
<script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
<script defer="" src="../js/base.js"></script>
<script defer="" src="../search/main.js"></script>
<div aria-hidden="true" aria-labelledby="searchModalLabel" class="modal" id="mkdocs_search_modal" role="dialog" tabindex="-1">
<div class="modal-dialog modal-lg">
<div class="modal-content">
<div class="modal-header">
<h4 class="modal-title" id="searchModalLabel">Search</h4>
<button class="close" data-dismiss="modal" type="button"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
</div>
<div class="modal-body">
<p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
<form>
<div class="form-group">
<input class="form-control" id="mkdocs-search-query" placeholder="Search..." title="Type search term here" type="search"/>
</div>
</form>
<div id="mkdocs-search-results"></div>
</div>
<div class="modal-footer">
</div>
</div>
</div>
</div><div aria-hidden="true" aria-labelledby="keyboardModalLabel" class="modal" id="mkdocs_keyboard_modal" role="dialog" tabindex="-1">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header">
<h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
<button class="close" data-dismiss="modal" type="button"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
</div>
<div class="modal-body">
<table class="table">
<thead>
<tr>
<th style="width: 20%;">Keys</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td class="help shortcut"><kbd>?</kbd></td>
<td>Open this help</td>
</tr>
<tr>
<td class="next shortcut"><kbd>n</kbd></td>
<td>Next page</td>
</tr>
<tr>
<td class="prev shortcut"><kbd>p</kbd></td>
<td>Previous page</td>
</tr>
<tr>
<td class="search shortcut"><kbd>s</kbd></td>
<td>Search</td>
</tr>
</tbody>
</table>
</div>
<div class="modal-footer">
</div>
</div>
</div>
</div>
</body>
</html>
